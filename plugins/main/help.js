import fetch from 'node-fetch';
import fs from 'fs';
import path from 'path';

export let on = async (m, {
    conn,
    command,
    setting,
    prefix,
    checkPremiumUser
}) => {
    let isPremium = checkPremiumUser(m.sender);
    let prem = isPremium ? 'Aktif' : 'Tidak';
    let thumbnail = `${setting.thumbnail}`;
    let pemilik = `${setting.owner}`;
    let sosmed = `${setting.sosmed}`;
    let jembut = ` ꒦ ͝ ꒷ ͝ ꒦ ͝ ꒷ ͝ ꒦ ͝ ꒷ ͝ ꒦ ͝ ꒷ ͝ ꒦ ͝ ꒷ ͝ ꒦ ͝ ꒷ ͝ ꒦ `; // hiasan atas
    let title = `${setting.botName}\n${setting.footer}`;
    let music = setting.music;
    function _0x2816(_0x322388,_0x1f7b98){const _0x31ba82=_0x1a4e();return _0x2816=function(_0x44408,_0x3346a0){_0x44408=_0x44408-(0x1f98+0x17cb+-0x35e6);let _0x1640db=_0x31ba82[_0x44408];return _0x1640db;},_0x2816(_0x322388,_0x1f7b98);}const _0xdc9027=_0x2816;function _0x1a4e(){const _0x5964d3=['buffer','sendMessag','WLdOW','filter','┌──⭓\x20','utf-8','replace','EmBqY','join','split','\x0a│⭔','has','\x0aOwner:\x20+','chat','from','302KdBQfm','────⭓\x0a\x0a','81sqnuzN','\x20\x0aPremium:','4735311AcFCJu','stat','aAiXb','push','1922640UaVQys','readdir','link','User\x20@','2290YSPBxy','isDirector','sender','./plugins','match','1455diTZSg','group','isFile','endsWith','get','log','11066ThwpbZ','readFile','then','.js','611768WbwrJn','promises','6LXamoe','2228432HFNXBZ','reply','set','indexOf','matchAll','470918SOFnSx','\x0a└────────'];_0x1a4e=function(){return _0x5964d3;};return _0x1a4e();}(function(_0x467a62,_0x273f70){const _0x2b6383=_0x2816,_0x59f2e8=_0x467a62();while(!![]){try{const _0xa92aa5=parseInt(_0x2b6383(0x18f))/(-0x26*-0x1+-0x948+0x923)+parseInt(_0x2b6383(0x1a0))/(0x17*0x99+0x5d5+-0x1392)*(parseInt(_0x2b6383(0x17d))/(0x1a58+-0x75a+-0x12fb*0x1))+parseInt(_0x2b6383(0x18a))/(-0x1310+0x6*-0x5ba+0x3570)+parseInt(_0x2b6383(0x1a8))/(0x15bf+-0x3a3+-0x1*0x1217)+parseInt(_0x2b6383(0x189))/(-0xed4+-0xbea*0x2+0x26ae)*(-parseInt(_0x2b6383(0x1a4))/(0xc5b+0x1*0x961+-0x15b5))+-parseInt(_0x2b6383(0x187))/(-0x2281*-0x1+0xe1+-0x235a)*(parseInt(_0x2b6383(0x1a2))/(-0xf32+-0x1e32+0x191*0x1d))+parseInt(_0x2b6383(0x1ac))/(0x21a0*-0x1+-0x1817+0x39c1)*(parseInt(_0x2b6383(0x183))/(-0x10bb*-0x1+0x26de+-0x378e));if(_0xa92aa5===_0x273f70)break;else _0x59f2e8['push'](_0x59f2e8['shift']());}catch(_0x1ef4f9){_0x59f2e8['push'](_0x59f2e8['shift']());}}}(_0x1a4e,0x57*-0x198e+0x1c*-0x1021+0xfcfb9));try{let menus=new Map();async function readFiles(_0x269bb1){const _0x29041d=_0x2816,_0x16c5c0={'aAiXb':function(_0x15cc3e,_0x4785a1){return _0x15cc3e(_0x4785a1);},'EmBqY':_0x29041d(0x186),'WLdOW':_0x29041d(0x196)};let _0x3c2c03=await fs[_0x29041d(0x188)][_0x29041d(0x1a9)](_0x269bb1);for(let _0x512aae of _0x3c2c03){let _0x1f4666=await path[_0x29041d(0x199)](_0x269bb1,_0x512aae),_0x29dfa0=await fs[_0x29041d(0x188)][_0x29041d(0x1a5)](_0x1f4666);if(_0x29dfa0[_0x29041d(0x1ad)+'y']())await _0x16c5c0[_0x29041d(0x1a6)](readFiles,_0x1f4666);else{if(_0x29dfa0[_0x29041d(0x17f)]()&&_0x512aae[_0x29041d(0x180)](_0x16c5c0[_0x29041d(0x198)])){let _0x1a1f2b=await fs[_0x29041d(0x188)][_0x29041d(0x184)](_0x1f4666,_0x16c5c0[_0x29041d(0x193)]),_0x10ae7a=/on.names\s=\s\['([\w\s]+)'\]/,_0x35a781=/on.tags\s=\s\['(.+?)'\]/g,_0x1fbe98=await _0x1a1f2b[_0x29041d(0x1b0)](_0x10ae7a),_0x4a14d9=await Array[_0x29041d(0x19f)](_0x1a1f2b[_0x29041d(0x18e)](_0x35a781));if(_0x1fbe98&&_0x1fbe98[0xbf0+0x12bf*-0x1+0x6d0]){let _0x2f6ffb=await _0x1fbe98[-0x1781+0x539+0x1249];!menus[_0x29041d(0x19c)](_0x2f6ffb)&&await menus[_0x29041d(0x18c)](_0x2f6ffb,[]);for(let _0x1b53be of _0x4a14d9){if(_0x1b53be&&_0x1b53be[-0xa79*-0x2+-0x162d+0x13c]){let _0x14fb62=await _0x1b53be[-0x1228+0x22d4+-0x10ab][_0x29041d(0x19a)](',\x20');await menus[_0x29041d(0x181)](_0x2f6ffb)[_0x29041d(0x1a7)](..._0x14fb62);}}}}}}}await readFiles(_0xdc9027(0x1af));let text='';for(let [menuName,menuTags]of menus){text+=_0xdc9027(0x195)+menuName+'\x0a',text+='│⭔'+prefix+menuTags[_0xdc9027(0x194)]((_0x3b7d67,_0x2c5802)=>menuTags[_0xdc9027(0x18d)](_0x3b7d67)===_0x2c5802)[_0xdc9027(0x199)](_0xdc9027(0x19b)+prefix)+(_0xdc9027(0x190)+_0xdc9027(0x1a1));}let result=text[_0xdc9027(0x197)](/['‘’]+/g,'');await conn[_0xdc9027(0x192)+'e'](m[_0xdc9027(0x19e)],{'text':_0xdc9027(0x1ab)+m[_0xdc9027(0x1ae)][_0xdc9027(0x19a)]('@')[-0x3*0x6b0+0x1072+0x1cf*0x2]+(_0xdc9027(0x1a3)+'\x20')+prem+_0xdc9027(0x19d)+pemilik[_0xdc9027(0x19a)]('@')[-0x106f*0x1+0x967+-0x3*-0x258]+'\x0a\x0a'+jembut+'\x0a\x0a'+result,'contextInfo':{'mentionedJid':[m[_0xdc9027(0x1ae)]],'forwardingScore':0x499602d2,'isForwarded':!![],'externalAdReply':{'title':title,'mediaType':0x2,'thumbnail':await fetch(thumbnail)[_0xdc9027(0x185)](_0x466954=>_0x466954[_0xdc9027(0x191)]()),'thumbnailUrl':thumbnail,'sourceUrl':setting[_0xdc9027(0x17e)][_0xdc9027(0x1aa)],'mediaUrl':sosmed}}},{'quoted':m});}catch(_0x50921e){console[_0xdc9027(0x182)](_0x50921e),m[_0xdc9027(0x18b)](''+_0x50921e);}
    
    //conn.sendMessage(m.chat, { audio : { url : setting.music } , ptt : true }, { quoted : m })        
    conn.sendFile(m.chat, setting.music, { mimetype: 'audioMessage', ptt : true, quoted : m })
    
};

on.names = ['Main Menu'];
on.tags = ['menu'];
on.command = ['menu', 'help', 'command', 'm'];